(this["webpackJsonpswapi-gui"]=this["webpackJsonpswapi-gui"]||[]).push([[0],{27:function(e,t,n){e.exports=n.p+"static/media/error-banner.e76c8d59.png"},29:function(e,t,n){e.exports=n(42)},39:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(18),c=n.n(i),o=n(12),s=n(1),l=n(6),u=n(7),m=n(13),p=n(11),d=function(e){var t=e.films;return a.a.createElement("div",{className:"list-group"},t.map((function(e){var t="/films/"+e.url.id;return a.a.createElement(o.b,{to:t,key:e.episode_id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},e.title,a.a.createElement("span",{className:"badge badge-primary badge-pill"},"Episode: ",e.episode_id))})))},f=n(27),h=n.n(f),E=function(e){var t=e.details,n=t?a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",null),a.a.createElement("p",{className:"mb-0 text-muted"},"Error details: ",t)):null;return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 alert alert-danger p-5 my-1 text-center",role:"alert"},a.a.createElement("img",{src:h.a,alt:"",width:"100",className:"mb-4"}),a.a.createElement("h4",{className:"alert-heading"},"Some error happened!"),a.a.createElement("p",null,"Oops... Looks like something went wrong."),n)))},v=function(){return a.a.createElement("div",{className:"p-3 text-center"},a.a.createElement("div",{className:"spinner-border text-primary",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))},y=function(e){var t=e.callback,n=e.sortTypes,r=e.active;return a.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},n.map((function(e){var n="btn btn-outline-secondary "+(e===r?"active":"");return a.a.createElement("button",{onClick:function(){return t(e)},key:e,type:"button","data-target":"title",className:n},e)})))},g=function(e,t,n,r){t(function(e,t){return{type:"FETCH_ENTITY_REQUEST",payload:{entity:e,id:t}}}(n,r)),e.getEntity(n,{id:r}).then((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_SUCCESS",payload:{entity:e,id:t,data:n}}}(n,r,e))})).catch((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_FAILURE",payload:{entity:e,id:t,error:n}}}(n,r,e))}))},b=n(5),j=n(10),_=a.a.createContext(),O=_.Provider,S=_.Consumer,T=function(){return function(e){return function(t){return a.a.createElement(S,null,(function(n){return a.a.createElement(e,Object.assign({},t,{swapiService:n}))}))}}},C=function(e){return e.toLowerCase().replace(" ","")},L=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={searchValue:"",sortType:"episode"},e.sortTypes={title:function(e,t){return e.title[0].toLowerCase()>t.title[0].toLowerCase()?1:-1},episode:function(e,t){return e.episode_id>t.episode_id?1:-1}},e.onSearchValueChange=function(t){e.setState({searchValue:t.target.value})},e.applySearchValue=function(t){return t.filter((function(t){var n=C(t.title),r=C(e.state.searchValue);return n.includes(r)}))},e.onSortTypeChange=function(t){e.setState({sortType:t})},e.applySortType=function(t){var n=e.state.sortType;return n?t.sort(e.sortTypes[n]):t},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getFilms;e.films.data.length||t()}},{key:"getFilmsList",value:function(){var e=this.props.films,t=e.loading,n=e.data;if(e.hasError)return a.a.createElement(E,{details:"Film load failure"});if(t)return a.a.createElement(v,null);var r=Object(b.b)(this.applySortType,this.applySearchValue)(n);return a.a.createElement(d,{films:r})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},a.a.createElement("input",{onChange:this.onSearchValueChange,type:"text",placeholder:"Search...",className:"form-control mr-3"}),a.a.createElement(y,{active:this.state.sortType,callback:this.onSortTypeChange,sortTypes:Object.keys(this.sortTypes)})),this.getFilmsList())}}]),n}(a.a.Component),N=Object(b.b)(T(),Object(j.b)((function(e){return{films:e.films}}),(function(e,t){var n=t.swapiService;return{getFilms:function(){return function(e,t){t({type:"FETCH_ALL_FILMS_REQUEST"}),e.getEntity("films").then((function(e){return t(function(e){return{type:"FETCH_ALL_FILMS_SUCCESS",payload:e}}(e))})).catch((function(e){return t({type:"FETCH_ALL_FILMS_FAILURE"})}))}(n,e)}}})))(L),k=n(16),w=function(e){var t=e.entity,n=e.id,r=e.text;return a.a.createElement(o.b,{className:"badge text-white mr-1 badge-primary",to:"/"+t+"/"+n},r)},F=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getDataByParams=function(){(0,e.props.getItems)()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getDataByParams()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError,i=this.props,c=i.entity,o=i.id,s=Object.values(t)[0];return n&&(s="Loading..."),r&&(s="Error"),a.a.createElement(w,{entity:c,id:o,text:s})}}]),n}(a.a.Component),I=Object(b.b)(T(),Object(j.b)((function(e,t){var n=[t.entity,t.id].join("_"),r=e.entities[n]?e.entities[n]:{},a=r.loading,i=void 0===a||a,c=r.hasError,o=void 0!==c&&c,s=r.data;return{loading:i,items:void 0===s?[]:s,hasError:o}}),(function(e,t){var n=t.swapiService,r=t.entity,a=t.id;return{getItems:function(){return g(n,e,r,a)}}})))(F),x=function(e){var t=e.key_,n=e.value;return a.a.createElement("li",{className:"list-group-item"},a.a.createElement("strong",null,t),": ",n)},A=function(e){var t=e.entity,n=e.id;return a.a.createElement(I,{key:n,entity:t,id:n})},U=function(e){var t=e.entity,n=e.id;return a.a.createElement(w,{entity:t,id:n})},H=function(e){return(e=e[0].toUpperCase()+e.slice(1)).replace("_"," ")},R=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderItem=function(e){var t=Object(k.a)(e,2),n=t[0],r=t[1];return n=H(n),"object"===typeof r&&"entity"!==r.type&&(r=a.a.createElement("div",null,r.map(A))),"object"===typeof r&&"entity"===r.type&&(console.log(r),r=U(r)),a.a.createElement(x,{value:r,key:n,key_:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getItems()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.items.length!==e.items.length&&0===this.props.items.length&&this.props.getItems()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError;if(n)return a.a.createElement(v,null);if(r)return a.a.createElement(E,null);var i=Object.entries(t).map(this.renderItem);return a.a.createElement("ul",{className:"list-group list-group-flush"},i)}}]),n}(a.a.Component),P=Object(b.b)(T(),Object(j.b)((function(e,t){var n=t.match.params,r=[n.entity,n.id].join("_"),a=e.entities[r]?e.entities[r]:{},i=a.loading,c=void 0===i||i,o=a.hasError,s=void 0!==o&&o,l=a.data;return{loading:c,items:void 0===l?[]:l,hasError:s}}),(function(e,t){var n=t.swapiService,r=t.match.params,a=r.entity,i=r.id;return{getItems:function(){return g(n,e,a,i)}}})))(R),V=(n(39),function(){return a.a.createElement("div",{className:"bg-dark text-light px-2 py-3 mb-4",id:"header"},a.a.createElement("h1",{className:"text-center"},"StarWars Films"),a.a.createElement("p",{className:"text-center"},a.a.createElement(o.b,{to:"/",className:"text-muted"},"back to homepage")))}),D=function(e){var t=e.children;return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col-md-9 col-lg-5"},t)))},M=function(){return a.a.createElement(o.a,null,a.a.createElement(D,null,a.a.createElement(V,null),a.a.createElement(s.b,{path:"/",exact:!0,component:N}),a.a.createElement(s.b,{path:"/:entity/:id",component:P}),a.a.createElement(s.b,{render:function(){return a.a.createElement(s.a,{to:"/"})}})))},B=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(u.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.errorBanner,r=t.children;return e?n:r}}]),n}(a.a.Component);B.defaultProps={errorBanner:E};var Y=B,Q=n(9),J={loading:!0,hasError:!1,data:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_FILMS_REQUEST":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0,hasError:!1});case"FETCH_ALL_FILMS_FAILURE":return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,hasError:!0});case"FETCH_ALL_FILMS_SUCCESS":return Object(Q.a)(Object(Q.a)({},e),{},{data:t.payload,loading:!1,hasError:!1});default:return e}},W=function(e,t,n){var r=t.payload,a=[r.entity,r.id].join("_");return e[a]=Object(Q.a)(Object(Q.a)(Object(Q.a)({},{loading:!0,hasError:!1,data:[]}),e[a]),n),e},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ENTITY_REQUEST":return W(e,t,{loading:!0,hasError:!1});case"FETCH_ENTITY_SUCCESS":var n=t.payload.data;return W(e,t,{loading:!1,hasError:!1,data:n});case"FETCH_ENTITY_FAILURE":return W(e,t,{loading:!1,hasError:!0});default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{films:z(e.films,t),entities:Z(e.entities,t)}},q=Object(b.c)($),G=n(17),K=n.n(G),X=n(24),ee=function(){function e(){var t=this;Object(l.a)(this,e),this.BASE_URL="https://swapi.dev/api/",this.getData=function(){var e=Object(X.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getEntity=function(){var e=Object(X.a)(K.a.mark((function e(n){var r,a,i,c,o,s,l,u,m,p,d=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},a=r.id,i=void 0===a?null:a,c=r.page,s=n+"/",l=i?i+"/":"",u=(o=void 0===c?null:c)?"?page="+o:"",m=t.BASE_URL+s+l+u,e.next=8,t.getData(m);case 8:return p=e.sent,e.abrupt("return",t._resultParser(p));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resultParser=function(e){return e.results?e.results.map(t._listItemParser):t._listItemParser(e)},this._listItemParser=function(e){var n=Object.entries(e).map(t._singleItemParser);return Object.fromEntries(n)},this._singleItemParser=function(e){var n,r=Object(k.a)(e,2),a=r[0],i=r[1];return null!==i&&(n="object"===typeof i?i.map(t._processValue):t._processValue(i)),[a,n]},this._isLink=function(e){return e.match(/^http(s)?:\/\//)},this._processValue=function(e){return t._isLink(e.toString())?t._getTypeAndIdFromURL(e):e}}return Object(u.a)(e,[{key:"_getTypeAndIdFromURL",value:function(e){var t=e.match(/\/([a-zA-Z]+)\/((\d+)\/)?$/),n=Object(k.a)(t,4),r=n[1],a=n[3];return{entity:r,id:void 0===a?null:a,type:"entity"}}}]),e}(),te=(n(41),new ee);c.a.render(a.a.createElement(j.a,{store:q},a.a.createElement(Y,null,a.a.createElement(O,{value:te},a.a.createElement(M,null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.5349c2fb.chunk.js.map