(this["webpackJsonpswapi-gui"]=this["webpackJsonpswapi-gui"]||[]).push([[0],{40:function(t,e,r){},43:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),i=r(20),s=r.n(i),c=r(12),o=r(3),u=r(10),l=r(11),d=r(15),p=r(14),j=r(1),h=function(t){var e=t.films;return Object(j.jsx)("div",{className:"list-group",children:e.map((function(t){var e="/films/"+t.url.id;return Object(j.jsxs)(c.b,{to:e,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",children:[t.title,Object(j.jsxs)("span",{className:"badge badge-primary badge-pill",children:["Episode: ",t.episode_id]})]},t.episode_id)}))})},b=r.p+"static/media/error-banner.10e573c3.png",f=function(t){var e=t.details,r=e?Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)("hr",{}),Object(j.jsxs)("p",{className:"mb-0 text-muted",children:["Error details: ",e]})]}):null;return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-12 alert alert-danger p-5 my-1 text-center",role:"alert",children:[Object(j.jsx)("img",{src:b,alt:"",width:"100",className:"mb-4"}),Object(j.jsx)("h4",{className:"alert-heading",children:"Some error happened!"}),Object(j.jsx)("p",{children:"Oops... Looks like something went wrong."}),r]})})})},m=function(){return Object(j.jsx)("div",{className:"p-3 text-center",children:Object(j.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(j.jsx)("span",{className:"sr-only",children:"Loading..."})})})},v=function(t){var e=t.callback,r=t.sortTypes,n=t.active;return Object(j.jsx)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:r.map((function(t){var r="btn btn-outline-secondary "+(t===n?"active":"");return Object(j.jsx)("button",{onClick:function(){return e(t)},type:"button","data-target":"title",className:r,children:t},t)}))})},y=function(t,e,r,n){e(function(t,e){return{type:"FETCH_ENTITY_REQUEST",payload:{entity:t,id:e}}}(r,n)),t.getEntity(r,{id:n}).then((function(t){return e(function(t,e,r){return{type:"FETCH_ENTITY_SUCCESS",payload:{entity:t,id:e,data:r}}}(r,n,t))})).catch((function(t){return e(function(t,e,r){return{type:"FETCH_ENTITY_FAILURE",payload:{entity:t,id:e,error:r}}}(r,n,t))}))},O=r(9),g=r(13),x=r(7),E=a.a.createContext(),_=E.Provider,S=E.Consumer,T=function(){return function(t){return function(e){return Object(j.jsx)(S,{children:function(r){return Object(j.jsx)(t,Object(x.a)(Object(x.a)({},e),{},{swapiService:r}))}})}}},C=function(t){return t.toLowerCase().replace(" ","")},L=function(t){Object(d.a)(r,t);var e=Object(p.a)(r);function r(){var t;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={searchValue:"",sortType:"episode"},t.sortTypes={title:function(t,e){return t.title[0].toLowerCase()>e.title[0].toLowerCase()?1:-1},episode:function(t,e){return t.episode_id>e.episode_id?1:-1}},t.onSearchValueChange=function(e){t.setState({searchValue:e.target.value})},t.applySearchValue=function(e){return e.filter((function(e){var r=C(e.title),n=C(t.state.searchValue);return r.includes(n)}))},t.onSortTypeChange=function(e){t.setState({sortType:e})},t.applySortType=function(e){var r=t.state.sortType;return r?e.sort(t.sortTypes[r]):e},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this.props,e=t.getFilms;t.films.data.length||e()}},{key:"getFilmsList",value:function(){var t=this.props.films,e=t.loading,r=t.data;if(t.hasError)return Object(j.jsx)(f,{details:"Film load failure"});if(e)return Object(j.jsx)(m,{});var n=Object(O.b)(this.applySortType,this.applySearchValue)(r);return Object(j.jsx)(h,{films:n})}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(j.jsx)("input",{onChange:this.onSearchValueChange,type:"text",placeholder:"Search...",className:"form-control mr-3"}),Object(j.jsx)(v,{active:this.state.sortType,callback:this.onSortTypeChange,sortTypes:Object.keys(this.sortTypes)})]}),this.getFilmsList()]})}}]),r}(a.a.Component),w=Object(O.b)(T(),Object(g.b)((function(t){return{films:t.films}}),(function(t,e){var r=e.swapiService;return{getFilms:function(){return function(t,e){e({type:"FETCH_ALL_FILMS_REQUEST"}),t.getEntity("films").then((function(t){return e(function(t){return{type:"FETCH_ALL_FILMS_SUCCESS",payload:t}}(t))})).catch((function(t){return e({type:"FETCH_ALL_FILMS_FAILURE"})}))}(r,t)}}})))(L),N=r(18),F=function(t){var e=t.entity,r=t.id,n=t.text;return Object(j.jsx)(c.b,{className:"badge text-white mr-1 badge-primary",to:"/"+e+"/"+r,children:n})},I=function(t){Object(d.a)(r,t);var e=Object(p.a)(r);function r(){var t;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).getDataByParams=function(){(0,t.props.getItems)()},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getDataByParams()}},{key:"render",value:function(){var t=this.props,e=t.items,r=t.loading,n=t.hasError,a=this.props,i=a.entity,s=a.id,c=Object.values(e)[0];return r&&(c="Loading..."),n&&(c="Error"),Object(j.jsx)(F,{entity:i,id:s,text:c})}}]),r}(a.a.Component),k=Object(O.b)(T(),Object(g.b)((function(t,e){var r=[e.entity,e.id].join("_"),n=t.entities[r]?t.entities[r]:{},a=n.loading,i=void 0===a||a,s=n.hasError,c=void 0!==s&&s,o=n.data;return{loading:i,items:void 0===o?[]:o,hasError:c}}),(function(t,e){var r=e.swapiService,n=e.entity,a=e.id;return{getItems:function(){return y(r,t,n,a)}}})))(I),A=function(t){var e=t.key_,r=t.value;return Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("strong",{children:e}),": ",r]})},U=function(t){var e=t.entity,r=t.id;return Object(j.jsx)(k,{entity:e,id:r},r)},H=function(t,e){var r=t.entity,n=t.id;return Object(j.jsx)(F,{entity:r,id:n,text:e})},R=function(t){return(t=t[0].toUpperCase()+t.slice(1)).replace("_"," ")},P=function(t){Object(d.a)(r,t);var e=Object(p.a)(r);function r(){var t;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).renderItem=function(t){var e=Object(N.a)(t,2),r=e[0],n=e[1];if(r=R(r),"object"===typeof n&&"entity"!==n.type&&(n=Object(j.jsx)("div",{children:n.map(U)})),"object"===typeof n&&"entity"===n.type){var a="".concat(n.entity," entity with id ").concat(n.id);n=H(n,a)}return Object(j.jsx)(A,{value:n,key_:r},r)},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.getItems()}},{key:"componentDidUpdate",value:function(t,e,r){this.props.items.length!==t.items.length&&0===this.props.items.length&&this.props.getItems()}},{key:"render",value:function(){var t=this.props,e=t.items,r=t.loading,n=t.hasError;if(r)return Object(j.jsx)(m,{});if(n)return Object(j.jsx)(f,{});var a=Object.entries(e).map(this.renderItem);return Object(j.jsx)("ul",{className:"list-group list-group-flush",children:a})}}]),r}(a.a.Component),V=Object(O.b)(T(),Object(g.b)((function(t,e){var r=e.match.params,n=[r.entity,r.id].join("_"),a=t.entities[n]?t.entities[n]:{},i=a.loading,s=void 0===i||i,c=a.hasError,o=void 0!==c&&c,u=a.data;return{loading:s,items:void 0===u?[]:u,hasError:o}}),(function(t,e){var r=e.swapiService,n=e.match.params,a=n.entity,i=n.id;return{getItems:function(){return y(r,t,a,i)}}})))(P),D=function(t){var e=t.children;return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)("div",{className:"col-md-9 col-lg-5",children:e})})})},M=(r(40),function(){return Object(j.jsxs)("div",{className:"bg-dark text-light px-2 py-3 mb-4",id:"header",children:[Object(j.jsx)("h1",{className:"text-center",children:"StarWars Films"}),Object(j.jsx)("p",{className:"text-center",children:Object(j.jsx)(c.b,{to:"/",className:"text-muted",children:"back to homepage"})})]})}),B=function(){return Object(j.jsx)(c.a,{basename:"/swapi-gui",children:Object(j.jsxs)(D,{children:[Object(j.jsx)(M,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/",exact:!0,component:w}),Object(j.jsx)(o.b,{path:"/:entity/:id",component:V}),Object(j.jsx)(o.b,{render:function(){return Object(j.jsx)(o.a,{to:"/"})}})]})]})})},Y=function(t){Object(d.a)(r,t);var e=Object(p.a)(r);function r(){var t;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={hasError:!1},t}return Object(l.a)(r,[{key:"componentDidCatch",value:function(t,e){this.setState({hasError:!0})}},{key:"render",value:function(){var t=this.state.hasError,e=this.props,r=e.errorBanner,n=e.children;return t?r:n}}]),r}(a.a.Component);Y.defaultProps={errorBanner:f};var Q=Y,J={loading:!0,hasError:!1,data:[]},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_ALL_FILMS_REQUEST":return Object(x.a)(Object(x.a)({},t),{},{loading:!0,hasError:!1});case"FETCH_ALL_FILMS_FAILURE":return Object(x.a)(Object(x.a)({},t),{},{loading:!1,hasError:!0});case"FETCH_ALL_FILMS_SUCCESS":return Object(x.a)(Object(x.a)({},t),{},{data:e.payload,loading:!1,hasError:!1});default:return t}},W=function(t,e,r){var n=e.payload,a=[n.entity,n.id].join("_");return t[a]=Object(x.a)(Object(x.a)(Object(x.a)({},{loading:!0,hasError:!1,data:[]}),t[a]),r),t},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_ENTITY_REQUEST":return W(t,e,{loading:!0,hasError:!1});case"FETCH_ENTITY_SUCCESS":var r=e.payload.data;return W(t,e,{loading:!1,hasError:!1,data:r});case"FETCH_ENTITY_FAILURE":return W(t,e,{loading:!1,hasError:!0});default:return t}},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{films:z(t.films,e),entities:Z(t.entities,e)}},q=Object(O.c)($),G=r(19),K=r.n(G),X=r(27),tt=function(){function t(){var e=this;Object(u.a)(this,t),this.BASE_URL="https://swapi.dev/api/",this.getData=function(){var t=Object(X.a)(K.a.mark((function t(e){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getEntity=function(){var t=Object(X.a)(K.a.mark((function t(r){var n,a,i,s,c,o,u,l,d,p,j=arguments;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:{},a=n.id,i=void 0===a?null:a,s=n.page,o=r+"/",u=i?i+"/":"",l=(c=void 0===s?null:s)?"?page="+c:"",d=e.BASE_URL+o+u+l,t.next=8,e.getData(d);case 8:return p=t.sent,t.abrupt("return",e._resultParser(p));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this._resultParser=function(t){return t.results?t.results.map(e._listItemParser):e._listItemParser(t)},this._listItemParser=function(t){var r=Object.entries(t).map(e._singleItemParser);return Object.fromEntries(r)},this._singleItemParser=function(t){var r,n=Object(N.a)(t,2),a=n[0],i=n[1];return null!==i&&(r="object"===typeof i?i.map(e._processValue):e._processValue(i)),[a,r]},this._isLink=function(t){return t.match(/^http(s)?:\/\//)},this._processValue=function(t){return e._isLink(t.toString())?e._getTypeAndIdFromURL(t):t}}return Object(l.a)(t,[{key:"_getTypeAndIdFromURL",value:function(t){var e=t.match(/\/([a-zA-Z]+)\/((\d+)\/)?$/),r=Object(N.a)(e,4),n=r[1],a=r[3];return{entity:n,id:void 0===a?null:a,type:"entity"}}}]),t}(),et=(r(42),new tt);s.a.render(Object(j.jsx)(g.a,{store:q,children:Object(j.jsx)(Q,{children:Object(j.jsx)(_,{value:et,children:Object(j.jsx)(B,{})})})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.8058c593.chunk.js.map