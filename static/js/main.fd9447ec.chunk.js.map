{"version":3,"sources":["components/error-banner/error-banner.png","actions/index.js","components/films-service-context/films-service-context.js","components/hoc/with-swapi-service.js","components/loading-indicator/index.js","components/loading-indicator/loading-indicator.js","components/error-banner/index.js","components/error-banner/error-banner.js","components/details-list/entity-link.js","components/details-list/entity-list-item.js","components/details-list/details-list.js","components/details-list/index.js","components/film-list/index.js","components/film-list/film-list.js","components/pages/films-page.js","components/header/index.js","components/header/header.js","components/app/index.js","components/app/app.js","reducers/index.js","store.js","services/swapi-service.js","components/error-boundary/error-boundary.js","components/error-boundary/index.js","index.js"],"names":["module","exports","fetchEntity","service","dispatch","entity","id","type","payload","fetchEntityRequest","getEntity","then","data","fetchEntitySuccess","catch","error","fetchEntityFailure","React","createContext","SwapiServiceProvider","Provider","SwapiServiceConsumer","Consumer","withSwapiService","Wrapped","props","swapiService","LoadingIndicator","className","role","ErrorBanner","details","errorDetails","Fragment","src","image","alt","width","EntityLink","text","to","EntityListItem","getDataByParams","getItems","this","items","loading","hasError","Object","values","Component","connect","state","ownProps","entityName","join","entityObj","entities","StringListItem","key_","value","renderEntityListItems","key","renderEntity","keyNameProcess","keyName","toUpperCase","slice","replace","DetailsList","renderItem","map","prevProps","prevState","snapshot","length","processedItems","entries","List","match","params","FilmList","films","film","url","episode_id","title","prepareToSearch","toLowerCase","SortButtons","callback","sortTypes","active","aria-label","onClick","data-target","FilmsPage","searchValue","sortType","film_1","film_2","episode","onSearchValueChange","event","setState","target","onSortTypeChange","applySortType","sort","applySearchValue","filter","field","includes","getFilms","compose","onChange","placeholder","keys","getFilmsList","fetchAllFilmsSuccess","fetchFilms","Header","App","path","exact","component","filmsInitialState","filmsReducer","action","applyEntityOrCreateNew","entity_key","entitiesReducer","reducer","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","SwapiService","BASE_URL","getData","a","fetch","response","json","page","entityInUrl","idInUrl","pageInUrl","api_endpoint","answer_data","_resultParser","results","_listItemParser","processed_data","_singleItemParser","fromEntries","processed_value","_processValue","_isLink","test_string","toString","_getTypeAndIdFromURL","ErrorBoundary","errorInfo","errorBanner","children","defaultProps","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fd9447ec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/error-banner.e76c8d59.png\";","export const fetchAllFilmsRequest = () => {\r\n    return {type: \"FETCH_ALL_FILMS_REQUEST\"}\r\n}\r\nexport const fetchAllFilmsFailure = () => {\r\n    return {type: \"FETCH_ALL_FILMS_FAILURE\"}\r\n}\r\nexport const fetchAllFilmsSuccess = (films) => {\r\n    return {\r\n        type: \"FETCH_ALL_FILMS_SUCCESS\",\r\n        payload: films,\r\n    }\r\n}\r\n\r\nexport const fetchFilms = (service, dispatch) => {\r\n    dispatch(fetchAllFilmsRequest());\r\n    service.getEntity(\"films\")\r\n        .then((films) => dispatch(fetchAllFilmsSuccess(films)))\r\n        .catch((error) => dispatch(fetchAllFilmsFailure(error)));\r\n}\r\n\r\nexport const fetchEntityRequest = (entity, id) => {\r\n    return {\r\n        type: \"FETCH_ENTITY_REQUEST\",\r\n        payload: {entity, id}\r\n    }\r\n}\r\nexport const fetchEntitySuccess = (entity, id, data) => {\r\n    return {\r\n        type: \"FETCH_ENTITY_SUCCESS\",\r\n        payload: {entity, id, data}\r\n    }\r\n}\r\n\r\nexport const fetchEntityFailure = (entity, id, error) => {\r\n    return {\r\n        type: \"FETCH_ENTITY_FAILURE\",\r\n        payload: {entity, id, error}\r\n    }\r\n}\r\n\r\nexport const fetchEntity = (service, dispatch, entity, id) => {\r\n    dispatch(fetchEntityRequest(entity, id));\r\n    service.getEntity(entity, {id})\r\n        .then(data => dispatch(fetchEntitySuccess(entity, id, data)))\r\n        .catch(error => dispatch(fetchEntityFailure(entity, id, error)));\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: SwapiServiceProvider,\r\n    Consumer: SwapiServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    SwapiServiceProvider,\r\n    SwapiServiceConsumer,\r\n};","import React from \"react\";\r\nimport {SwapiServiceConsumer} from \"../films-service-context/films-service-context\";\r\n\r\nconst withSwapiService = () => (Wrapped) => {\r\n    return (props) => (\r\n        <SwapiServiceConsumer>\r\n            {\r\n                (swapiService) => <Wrapped {...props} swapiService={swapiService} />\r\n            }\r\n        </SwapiServiceConsumer>\r\n    )\r\n}\r\n\r\nexport default withSwapiService;","import LoadingIndicator from \"./loading-indicator\";\r\nexport default LoadingIndicator;","import React from \"react\";\r\n\r\nconst LoadingIndicator = () => {\r\n    return (\r\n        <div className=\"p-3 text-center\">\r\n            <div className=\"spinner-border text-primary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoadingIndicator;","import ErrorBanner from \"./error-banner\";\r\nexport default ErrorBanner;","import React from \"react\";\r\nimport image from \"./error-banner.png\"\r\n\r\nconst ErrorBanner = ({details}) => {\r\n\r\n    const errorDetails = !details ? null : (\r\n        <React.Fragment>\r\n            <hr/>\r\n            <p className=\"mb-0 text-muted\">Error details: {details}</p>\r\n        </React.Fragment>\r\n    )\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12 alert alert-danger p-5 my-1 text-center\" role=\"alert\">\r\n                    <img src={image} alt=\"\" width=\"100\" className=\"mb-4\"/>\r\n                    <h4 className=\"alert-heading\">Some error happened!</h4>\r\n                    <p>Oops... Looks like something went wrong.</p>\r\n                    {errorDetails}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ErrorBanner;","import {Link} from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\nconst EntityLink = ({entity, id, text}) => {\r\n    return <Link className=\"badge text-white mr-1 badge-primary\" to={\"/\" + entity + \"/\" + id}>{text}</Link>\r\n};\r\n\r\nexport default EntityLink;","import React from \"react\";\r\nimport withSwapiService from \"../hoc/with-swapi-service\";\r\nimport {connect} from \"react-redux\";\r\nimport {fetchEntity} from \"../../actions\";\r\nimport EntityLink from \"./entity-link\";\r\n\r\nclass EntityListItem extends React.Component {\r\n    getDataByParams = () => {\r\n        const {getItems} = this.props;\r\n        getItems();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getDataByParams();\r\n    }\r\n\r\n    render() {\r\n        const {items, loading, hasError} = this.props;\r\n        const {entity, id} = this.props;\r\n        let text = Object.values(items)[0];\r\n\r\n        if (loading) text = \"Loading...\"\r\n        if (hasError) text = \"Error\"\r\n\r\n        return <EntityLink entity={entity} id={id} text={text}/>\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const {entity, id} = ownProps;\r\n    const entityName = [entity, id].join(\"_\");\r\n    const entityObj = state.entities[entityName] ? state.entities[entityName] : {};\r\n    const {loading=true, hasError=false, data=[]} = entityObj;\r\n    return {\r\n        loading,\r\n        items: data,\r\n        hasError,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const {swapiService} = ownProps;\r\n    const {entity, id} = ownProps;\r\n\r\n    return {\r\n        getItems: () => fetchEntity(swapiService, dispatch, entity, id),\r\n    }\r\n}\r\n\r\nexport default withSwapiService()(connect(mapStateToProps, mapDispatchToProps)(EntityListItem))","import React from \"react\";\r\nimport {connect} from \"react-redux\"\r\nimport {fetchEntity} from \"../../actions\";\r\nimport withSwapiService from \"../hoc/with-swapi-service\";\r\nimport LoadingIndicator from \"../loading-indicator\";\r\nimport ErrorBanner from \"../error-banner\";\r\nimport EntityListItem from \"./entity-list-item\";\r\nimport EntityLink from \"./entity-link\";\r\n\r\n\r\nconst StringListItem = ({key_, value}) => {\r\n    return (\r\n        <li className=\"list-group-item\"><strong>{key_}</strong>: {value}</li>\r\n    )\r\n\r\n}\r\n\r\nconst renderEntityListItems = (value) => {\r\n    const {entity, id} = value;\r\n    return <EntityListItem key={id} entity={entity} id={id}/>\r\n}\r\n\r\nconst renderEntity = (value) => {\r\n    const {entity, id} = value;\r\n    return <EntityLink entity={entity} id={id}/>\r\n}\r\n\r\nconst keyNameProcess = (keyName) => {\r\n    keyName = keyName[0].toUpperCase() + keyName.slice(1);\r\n    return keyName.replace(\"_\", \" \")\r\n}\r\n\r\n\r\nclass DetailsList extends React.Component {\r\n    componentDidMount() {\r\n        this.props.getItems();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.items.length !== prevProps.items.length && this.props.items.length === 0) {\r\n            this.props.getItems();\r\n        }\r\n    }\r\n\r\n    renderItem = ([key, value]) => {\r\n        key = keyNameProcess(key);\r\n\r\n        if (typeof value === 'object'  && value.type !== 'entity') {\r\n            value = (\r\n                <div>\r\n                    {value.map(renderEntityListItems)}\r\n                </div>\r\n            );\r\n        }\r\n        if (typeof value === 'object'  && value.type === 'entity') {\r\n            value = renderEntity(value);\r\n        }\r\n\r\n        return <StringListItem value={value} key={key} key_={key}/>;\r\n    }\r\n\r\n    render() {\r\n        let {items, loading, hasError} = this.props;\r\n\r\n        if (loading) return <LoadingIndicator />;\r\n        if (hasError) return <ErrorBanner/>;\r\n\r\n        const processedItems = Object.entries(items).map(this.renderItem);\r\n\r\n        return (\r\n            <ul className=\"list-group list-group-flush\">\r\n                {processedItems}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const {entity, id} = ownProps.match.params;\r\n    const entityName = [entity, id].join(\"_\");\r\n    const entityObj = state.entities[entityName] ? state.entities[entityName] : {};\r\n    const {loading=true, hasError=false, data=[]} = entityObj;\r\n    return {\r\n        loading,\r\n        items: data,\r\n        hasError,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const {swapiService} = ownProps;\r\n    const {entity, id} = ownProps.match.params;\r\n\r\n    return {\r\n        getItems: () => fetchEntity(swapiService, dispatch, entity, id),\r\n    }\r\n}\r\n\r\nexport default withSwapiService()(connect(mapStateToProps, mapDispatchToProps)(DetailsList));","import List from \"./details-list\";\r\nexport default List;","import FilmList from \"./film-list\";\r\nexport default FilmList;","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst FilmList = ({films}) => {\r\n    return (\r\n        <div className=\"list-group\">\r\n            {\r\n                films.map(film => {\r\n                    const {id} = film.url;\r\n                    const url = \"/films/\" + id;\r\n                    return (\r\n                        <Link to={url}\r\n                              key={film.episode_id}\r\n                              className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n                            {film.title}\r\n                            <span className=\"badge badge-primary badge-pill\">Episode: {film.episode_id}</span>\r\n                        </Link>\r\n                    );\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmList;","import React from \"react\";\r\nimport FilmList from \"../film-list\";\r\nimport ErrorBanner from \"../error-banner\";\r\nimport LoadingIndicator from \"../loading-indicator\";\r\nimport {fetchFilms} from \"../../actions\";\r\nimport {compose} from \"redux\";\r\nimport withSwapiService from \"../hoc/with-swapi-service\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst prepareToSearch = (value) => {\r\n    return value.toLowerCase().replace(\" \", \"\")\r\n}\r\n\r\n\r\nconst SortButtons = ({callback, sortTypes, active}) => {\r\n    return (\r\n        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n            {\r\n                sortTypes.map((type) => {\r\n                    const className = \"btn btn-outline-secondary \" + (type === active ? \"active\" : \"\");\r\n                    return (\r\n                        <button onClick={() => callback(type)} type=\"button\" data-target=\"title\" className={className}>{type}</button>\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nclass FilmsPage extends React.Component {\r\n    state = {\r\n        searchValue: \"\",\r\n        sortType: \"episode\",\r\n    }\r\n\r\n    sortTypes = {\r\n        title: (film_1, film_2) => film_1.title[0].toLowerCase() > film_2.title[0].toLowerCase() ? 1 : -1,\r\n        episode: (film_1, film_2) => film_1.episode_id > film_2.episode_id ? 1 : -1,\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {getFilms, films} = this.props;\r\n\r\n        if (!films.data.length) {\r\n            getFilms();\r\n        }\r\n    }\r\n\r\n    onSearchValueChange = (event) => {\r\n        this.setState({searchValue: event.target.value})\r\n    }\r\n\r\n    onSortTypeChange = (type) => {\r\n        this.setState({sortType: type});\r\n    }\r\n\r\n    applySortType = (films) => {\r\n        const {sortType} = this.state;\r\n\r\n        if (sortType) {\r\n            return films.sort(this.sortTypes[sortType])\r\n        }\r\n\r\n        return films;\r\n    }\r\n\r\n    applySearchValue = (films) => {\r\n        return films.filter((film) => {\r\n            const field = prepareToSearch(film.title);\r\n            const searchValue = prepareToSearch(this.state.searchValue);\r\n\r\n            return field.includes(searchValue);\r\n        })\r\n    }\r\n\r\n    getFilmsList() {\r\n        const {loading, data, hasError} = this.props.films;\r\n\r\n        if (hasError) return <ErrorBanner details=\"Film load failure\"/>;\r\n        if (loading) return <LoadingIndicator/>;\r\n\r\n        const films = compose(this.applySortType, this.applySearchValue)(data)\r\n\r\n        return <FilmList films={films}/>;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                    <input onChange={this.onSearchValueChange} type=\"text\" placeholder=\"Search...\"\r\n                           className=\"form-control mr-3\"/>\r\n                    <SortButtons active={this.state.sortType} callback={this.onSortTypeChange} sortTypes={Object.keys(this.sortTypes)}/>\r\n                </div>\r\n                {this.getFilmsList()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({films}) => {\r\n    return {\r\n        films,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const {swapiService} = ownProps;\r\n\r\n    return {\r\n        getFilms: () => fetchFilms(swapiService, dispatch)\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withSwapiService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)((FilmsPage));","import Header from \"./header\";\r\nexport default Header;","import React from \"react\";\r\nimport \"./header.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div className=\"bg-dark text-light px-2 py-3 mb-4\" id=\"header\">\r\n            <h1 className=\"text-center\">StarWars Films</h1>\r\n            <p className=\"text-center\"><Link to=\"/\" className=\"text-muted\">back to homepage</Link></p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;","import App from \"./app\";\r\nexport default App;","import React from \"react\";\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\nimport DetailsList from \"../details-list\";\r\nimport {FilmsPage} from \"../pages\";\r\nimport Header from \"../header\";\r\n\r\n\r\nclass App extends React.Component {\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <div className=\"container\">\r\n                    <div className=\"row justify-content-center\">\r\n                        <div className=\"col-md-9 col-lg-5\">\r\n                            <Header/>\r\n\r\n                            <Route path=\"/\" exact>\r\n                                <FilmsPage/>\r\n                            </Route>\r\n                            <Route path=\"/:entity/:id\" component={DetailsList}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Router>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n","const filmsInitialState = {\r\n    loading: true,\r\n    hasError: false,\r\n    data: []\r\n}\r\n\r\nconst filmsReducer = (state = filmsInitialState, action) => {\r\n    switch (action.type) {\r\n        case \"FETCH_ALL_FILMS_REQUEST\":\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                hasError: false,\r\n            }\r\n        case \"FETCH_ALL_FILMS_FAILURE\":\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                hasError: true,\r\n            }\r\n        case \"FETCH_ALL_FILMS_SUCCESS\":\r\n            return {\r\n                ...state,\r\n                data: action.payload,\r\n                loading: false,\r\n                hasError: false,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nconst applyEntityOrCreateNew = (entities, action, params) => {\r\n    const {entity, id} = action.payload;\r\n    const entity_key = [entity, id].join(\"_\");\r\n    const defaultEntity = {\r\n        loading: true,\r\n        hasError: false,\r\n        data: [],\r\n    }\r\n    entities[entity_key] = {\r\n        ...defaultEntity,\r\n        ...entities[entity_key],\r\n        ...params,\r\n    };\r\n\r\n    return entities;\r\n}\r\n\r\nconst entitiesReducer = (state={}, action) => {\r\n\r\n    switch (action.type) {\r\n        case \"FETCH_ENTITY_REQUEST\":\r\n            return applyEntityOrCreateNew(state, action, {loading: true, hasError: false})\r\n        case \"FETCH_ENTITY_SUCCESS\":\r\n            const {data} = action.payload;\r\n            return applyEntityOrCreateNew(state, action, {loading: false, hasError: false, data})\r\n        case \"FETCH_ENTITY_FAILURE\":\r\n            return applyEntityOrCreateNew(state, action, {loading: false, hasError: true})\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst reducer = (state = {}, action) => {\r\n    return {\r\n        films: filmsReducer(state.films, action),\r\n        entities: entitiesReducer(state.entities, action)\r\n    }\r\n}\r\n\r\nexport default reducer;","import {createStore} from \"redux\";\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__());\r\n\r\nexport default store;","export default class SwapiService {\r\n    BASE_URL = \"https://swapi.dev/api/\";\r\n\r\n    getData = async (url) => {\r\n        return fetch(url)\r\n            .then((response) => response.json());\r\n    }\r\n\r\n    getEntity = async (entity, params = {}) => {\r\n        const {id = null, page = null} = params;\r\n        const entityInUrl = entity + \"/\";\r\n        const idInUrl = id ? id + '/' : \"\";\r\n        const pageInUrl = page ? \"?page=\" + page : \"\";\r\n        const api_endpoint = this.BASE_URL + entityInUrl + idInUrl + pageInUrl;\r\n        const answer_data = await this.getData(api_endpoint);\r\n\r\n        return this._resultParser(answer_data);\r\n    };\r\n\r\n    _resultParser = (data) => {\r\n        let result_data;\r\n\r\n        if (data.results) {\r\n            result_data = data.results.map(this._listItemParser);\r\n        } else {\r\n            result_data = this._listItemParser(data);\r\n        }\r\n\r\n        return result_data;\r\n    };\r\n\r\n    _listItemParser = (data) => {\r\n        const data_entries = Object.entries(data)\r\n        const processed_data = data_entries.map(this._singleItemParser)\r\n        return Object.fromEntries(processed_data);\r\n    };\r\n\r\n    _singleItemParser = ([key, value]) => {\r\n        let processed_value;\r\n\r\n        if (value !== null) {\r\n            if (typeof value === 'object') {\r\n                processed_value = value.map(this._processValue);\r\n            } else {\r\n                processed_value = this._processValue(value);\r\n            }\r\n        }\r\n\r\n        return [key, processed_value];\r\n    };\r\n\r\n    _isLink = (test_string) => {\r\n        return test_string.match(/^http(s)?:\\/\\//);\r\n    }\r\n\r\n    _processValue = (value) => {\r\n        if (this._isLink(value.toString())) {\r\n            return this._getTypeAndIdFromURL(value);\r\n        }\r\n\r\n        return value;\r\n    };\r\n\r\n    _getTypeAndIdFromURL(url) {\r\n        const [, entity, , id = null] = url.match(/\\/([a-zA-Z]+)\\/((\\d+)\\/)?$/);\r\n        return {\r\n            entity,\r\n            id,\r\n            type: \"entity\",\r\n        };\r\n    }\r\n}","import React from \"react\";\r\nimport ErrorBanner from \"../error-banner\";\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n    state = {\r\n        hasError: false,\r\n    };\r\n\r\n    static defaultProps = {\r\n        errorBanner: ErrorBanner,\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n       this.setState({hasError: true});\r\n    }\r\n\r\n    render() {\r\n        const { hasError } = this.state;\r\n        const { errorBanner, children } = this.props;\r\n\r\n        return hasError ? errorBanner : children;\r\n    }\r\n}","import ErrorBoundary from \"./error-boundary\";\r\nexport default ErrorBoundary;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from \"./components/app\";\r\nimport {Provider} from \"react-redux\";\r\nimport store from \"./store\";\r\nimport {SwapiServiceProvider} from \"./components/films-service-context/films-service-context\";\r\nimport {SwapiService} from \"./services\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport ErrorBoundary from \"./components/error-boundary\";\r\n\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundary>\r\n            <SwapiServiceProvider value={new SwapiService()}>\r\n                <App/>\r\n            </SwapiServiceProvider>\r\n        </ErrorBoundary>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}