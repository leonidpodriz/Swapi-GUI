(this["webpackJsonpswapi-gui"]=this["webpackJsonpswapi-gui"]||[]).push([[0],{28:function(e,t,n){e.exports=n.p+"static/media/error-banner.e76c8d59.png"},29:function(e,t,n){e.exports=n(42)},39:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(18),c=n.n(i),o=n(4),s=n(5),l=n(8),u=n(7),p=n(12),m=n(1),d=n(16),f=n(11),h=function(e,t,n,r){t(function(e,t){return{type:"FETCH_ENTITY_REQUEST",payload:{entity:e,id:t}}}(n,r)),e.getEntity(n,{id:r}).then((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_SUCCESS",payload:{entity:e,id:t,data:n}}}(n,r,e))})).catch((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_FAILURE",payload:{entity:e,id:t,error:n}}}(n,r,e))}))},E=a.a.createContext(),v=E.Provider,y=E.Consumer,g=function(){return function(e){return function(t){return a.a.createElement(y,null,(function(n){return a.a.createElement(e,Object.assign({},t,{swapiService:n}))}))}}},b=function(){return a.a.createElement("div",{className:"p-3 text-center"},a.a.createElement("div",{className:"spinner-border text-primary",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))},_=n(28),j=n.n(_),O=function(e){var t=e.details,n=t?a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",null),a.a.createElement("p",{className:"mb-0 text-muted"},"Error details: ",t)):null;return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 alert alert-danger p-5 my-1 text-center",role:"alert"},a.a.createElement("img",{src:j.a,alt:"",width:"100",className:"mb-4"}),a.a.createElement("h4",{className:"alert-heading"},"Some error happened!"),a.a.createElement("p",null,"Oops... Looks like something went wrong."),n)))},S=function(e){var t=e.entity,n=e.id,r=e.text;return a.a.createElement(p.b,{className:"badge text-white mr-1 badge-primary",to:"/"+t+"/"+n},r)},T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getDataByParams=function(){(0,e.props.getItems)()},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getDataByParams()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError,i=this.props,c=i.entity,o=i.id,s=Object.values(t)[0];return n&&(s="Loading..."),r&&(s="Error"),a.a.createElement(S,{entity:c,id:o,text:s})}}]),n}(a.a.Component),C=g()(Object(f.b)((function(e,t){var n=[t.entity,t.id].join("_"),r=e.entities[n]?e.entities[n]:{},a=r.loading,i=void 0===a||a,c=r.hasError,o=void 0!==c&&c,s=r.data;return{loading:i,items:void 0===s?[]:s,hasError:o}}),(function(e,t){var n=t.swapiService,r=t.entity,a=t.id;return{getItems:function(){return h(n,e,r,a)}}}))(T)),L=function(e){var t=e.key_,n=e.value;return a.a.createElement("li",{className:"list-group-item"},a.a.createElement("strong",null,t),": ",n)},N=function(e){var t=e.entity,n=e.id;return a.a.createElement(C,{key:n,entity:t,id:n})},w=function(e){var t=e.entity,n=e.id;return a.a.createElement(S,{entity:t,id:n})},I=function(e){return(e=e[0].toUpperCase()+e.slice(1)).replace("_"," ")},k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderItem=function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return n=I(n),"object"===typeof r&&"entity"!==r.type&&(r=a.a.createElement("div",null,r.map(N))),"object"===typeof r&&"entity"===r.type&&(r=w(r)),a.a.createElement(L,{value:r,key:n,key_:n})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.getItems()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.items.length!==e.items.length&&0===this.props.items.length&&this.props.getItems()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError;if(n)return a.a.createElement(b,null);if(r)return a.a.createElement(O,null);var i=Object.entries(t).map(this.renderItem);return a.a.createElement("ul",{className:"list-group list-group-flush"},i)}}]),n}(a.a.Component),F=g()(Object(f.b)((function(e,t){var n=t.match.params,r=[n.entity,n.id].join("_"),a=e.entities[r]?e.entities[r]:{},i=a.loading,c=void 0===i||i,o=a.hasError,s=void 0!==o&&o,l=a.data;return{loading:c,items:void 0===l?[]:l,hasError:s}}),(function(e,t){var n=t.swapiService,r=t.match.params,a=r.entity,i=r.id;return{getItems:function(){return h(n,e,a,i)}}}))(k)),x=function(e){var t=e.films;return a.a.createElement("div",{className:"list-group"},t.map((function(e){var t="/films/"+e.url.id;return a.a.createElement(p.b,{to:t,key:e.episode_id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},e.title,a.a.createElement("span",{className:"badge badge-primary badge-pill"},"Episode: ",e.episode_id))})))},A=n(13),U=function(e){return e.toLowerCase().replace(" ","")},R=function(e){var t=e.callback,n=e.sortTypes,r=e.active;return a.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},n.map((function(e){var n="btn btn-outline-secondary "+(e===r?"active":"");return a.a.createElement("button",{onClick:function(){return t(e)},type:"button","data-target":"title",className:n},e)})))},H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={searchValue:"",sortType:"episode"},e.sortTypes={title:function(e,t){return e.title[0].toLowerCase()>t.title[0].toLowerCase()?1:-1},episode:function(e,t){return e.episode_id>t.episode_id?1:-1}},e.onSearchValueChange=function(t){e.setState({searchValue:t.target.value})},e.onSortTypeChange=function(t){e.setState({sortType:t})},e.applySortType=function(t){var n=e.state.sortType;return n?t.sort(e.sortTypes[n]):t},e.applySearchValue=function(t){return t.filter((function(t){var n=U(t.title),r=U(e.state.searchValue);return n.includes(r)}))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getFilms;e.films.data.length||t()}},{key:"getFilmsList",value:function(){var e=this.props.films,t=e.loading,n=e.data;if(e.hasError)return a.a.createElement(O,{details:"Film load failure"});if(t)return a.a.createElement(b,null);var r=Object(A.b)(this.applySortType,this.applySearchValue)(n);return a.a.createElement(x,{films:r})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-4"},a.a.createElement("input",{onChange:this.onSearchValueChange,type:"text",placeholder:"Search...",className:"form-control mr-3"}),a.a.createElement(R,{active:this.state.sortType,callback:this.onSortTypeChange,sortTypes:Object.keys(this.sortTypes)})),this.getFilmsList())}}]),n}(a.a.Component),D=Object(A.b)(g(),Object(f.b)((function(e){return{films:e.films}}),(function(e,t){var n=t.swapiService;return{getFilms:function(){return function(e,t){t({type:"FETCH_ALL_FILMS_REQUEST"}),e.getEntity("films").then((function(e){return t(function(e){return{type:"FETCH_ALL_FILMS_SUCCESS",payload:e}}(e))})).catch((function(e){return t({type:"FETCH_ALL_FILMS_FAILURE"})}))}(n,e)}}})))(H),P=(n(39),function(){return a.a.createElement("div",{className:"bg-dark text-light px-2 py-3 mb-4",id:"header"},a.a.createElement("h1",{className:"text-center"},"StarWars Films"),a.a.createElement("p",{className:"text-center"},a.a.createElement(p.b,{to:"/",className:"text-muted"},"back to homepage")))}),V=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(p.a,null,a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col-md-9 col-lg-5"},a.a.createElement(P,null),a.a.createElement(m.a,{path:"/",exact:!0},a.a.createElement(D,null)),a.a.createElement(m.a,{path:"/:entity/:id",component:F})))))}}]),n}(a.a.Component),M=n(10),B={loading:!0,hasError:!1,data:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_FILMS_REQUEST":return Object(M.a)(Object(M.a)({},e),{},{loading:!0,hasError:!1});case"FETCH_ALL_FILMS_FAILURE":return Object(M.a)(Object(M.a)({},e),{},{loading:!1,hasError:!0});case"FETCH_ALL_FILMS_SUCCESS":return Object(M.a)(Object(M.a)({},e),{},{data:t.payload,loading:!1,hasError:!1});default:return e}},Q=function(e,t,n){var r=t.payload,a=[r.entity,r.id].join("_");return e[a]=Object(M.a)(Object(M.a)(Object(M.a)({},{loading:!0,hasError:!1,data:[]}),e[a]),n),e},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ENTITY_REQUEST":return Q(e,t,{loading:!0,hasError:!1});case"FETCH_ENTITY_SUCCESS":var n=t.payload.data;return Q(e,t,{loading:!1,hasError:!1,data:n});case"FETCH_ENTITY_FAILURE":return Q(e,t,{loading:!1,hasError:!0});default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{films:Y(e.films,t),entities:J(e.entities,t)}},z=Object(A.c)(X,window.__REDUX_DEVTOOLS_EXTENSION__()),W=n(17),Z=n.n(W),$=n(24),q=function(){function e(){var t=this;Object(o.a)(this,e),this.BASE_URL="https://swapi.dev/api/",this.getData=function(){var e=Object($.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getEntity=function(){var e=Object($.a)(Z.a.mark((function e(n){var r,a,i,c,o,s,l,u,p,m,d=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},a=r.id,i=void 0===a?null:a,c=r.page,s=n+"/",l=i?i+"/":"",u=(o=void 0===c?null:c)?"?page="+o:"",p=t.BASE_URL+s+l+u,e.next=8,t.getData(p);case 8:return m=e.sent,e.abrupt("return",t._resultParser(m));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resultParser=function(e){return e.results?e.results.map(t._listItemParser):t._listItemParser(e)},this._listItemParser=function(e){var n=Object.entries(e).map(t._singleItemParser);return Object.fromEntries(n)},this._singleItemParser=function(e){var n,r=Object(d.a)(e,2),a=r[0],i=r[1];return null!==i&&(n="object"===typeof i?i.map(t._processValue):t._processValue(i)),[a,n]},this._isLink=function(e){return e.match(/^http(s)?:\/\//)},this._processValue=function(e){return t._isLink(e.toString())?t._getTypeAndIdFromURL(e):e}}return Object(s.a)(e,[{key:"_getTypeAndIdFromURL",value:function(e){var t=e.match(/\/([a-zA-Z]+)\/((\d+)\/)?$/),n=Object(d.a)(t,4),r=n[1],a=n[3];return{entity:r,id:void 0===a?null:a,type:"entity"}}}]),e}(),G=(n(41),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.errorBanner,r=t.children;return e?n:r}}]),n}(a.a.Component));G.defaultProps={errorBanner:O};var K=G;c.a.render(a.a.createElement(f.a,{store:z},a.a.createElement(K,null,a.a.createElement(v,{value:new q},a.a.createElement(V,null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.fd9447ec.chunk.js.map