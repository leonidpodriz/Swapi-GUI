(this["webpackJsonpswapi-gui"]=this["webpackJsonpswapi-gui"]||[]).push([[0],{28:function(e,t,n){e.exports=n.p+"static/media/error-banner.e76c8d59.png"},29:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(18),c=n.n(i),o=n(4),s=n(5),l=n(8),u=n(7),m=n(12),p=n(1),d=n(16),E=n(11),f=function(e,t,n,r){t(function(e,t){return{type:"FETCH_ENTITY_REQUEST",payload:{entity:e,id:t}}}(n,r)),e.getEntity(n,{id:r}).then((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_SUCCESS",payload:{entity:e,id:t,data:n}}}(n,r,e))})).catch((function(e){return t(function(e,t,n){return{type:"FETCH_ENTITY_FAILURE",payload:{entity:e,id:t,error:n}}}(n,r,e))}))},h=a.a.createContext(),v=h.Provider,y=h.Consumer,g=function(){return function(e){return function(t){return a.a.createElement(y,null,(function(n){return a.a.createElement(e,Object.assign({},t,{swapiService:n}))}))}}},b=function(){return a.a.createElement("div",{className:"p-3 text-center"},a.a.createElement("div",{className:"spinner-border text-primary",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))},_=n(28),j=n.n(_),O=function(e){var t=e.details,n=t?a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",null),a.a.createElement("p",{className:"mb-0 text-muted"},"Error details: ",t)):null;return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 alert alert-danger p-5 my-1 text-center",role:"alert"},a.a.createElement("img",{src:j.a,alt:"",width:"100",className:"mb-4"}),a.a.createElement("h4",{className:"alert-heading"},"Some error happened!"),a.a.createElement("p",null,"Oops... Looks like something went wrong."),n)))},S=function(e){var t=e.entity,n=e.id,r=e.text;return a.a.createElement(m.b,{className:"badge text-white mr-1 badge-primary",to:"/"+t+"/"+n},r)},I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getDataByParams=function(){(0,e.props.getItems)()},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getDataByParams()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError,i=this.props,c=i.entity,o=i.id,s=Object.values(t)[0];return n&&(s="Loading..."),r&&(s="Error"),a.a.createElement(S,{entity:c,id:o,text:s})}}]),n}(a.a.Component),L=g()(Object(E.b)((function(e,t){var n=[t.entity,t.id].join("_"),r=e.entities[n]?e.entities[n]:{},a=r.loading,i=void 0===a||a,c=r.hasError,o=void 0!==c&&c,s=r.data;return{loading:i,items:void 0===s?[]:s,hasError:o}}),(function(e,t){var n=t.swapiService,r=t.entity,a=t.id;return{getItems:function(){return f(n,e,r,a)}}}))(I)),T=function(e){var t=e.key_,n=e.value;return a.a.createElement("li",{className:"list-group-item"},a.a.createElement("strong",null,t),": ",n)},w=function(e){var t=e.entity,n=e.id;return a.a.createElement(L,{key:n,entity:t,id:n})},C=function(e){var t=e.entity,n=e.id;return a.a.createElement(S,{entity:t,id:n})},F=function(e){return(e=e[0].toUpperCase()+e.slice(1)).replace("_"," ")},N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderItem=function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return n=F(n),"object"===typeof r&&"entity"!==r.type&&(r=a.a.createElement("div",null,r.map(w))),"object"===typeof r&&"entity"===r.type&&(r=C(r)),a.a.createElement(T,{value:r,key:n,key_:n})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.getItems()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.items.length!==e.items.length&&0===this.props.items.length&&this.props.getItems()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.loading,r=e.hasError;if(n)return a.a.createElement(b,null);if(r)return a.a.createElement(O,null);var i=Object.entries(t).map(this.renderItem);return a.a.createElement("ul",{className:"list-group list-group-flush"},i)}}]),n}(a.a.Component),k=g()(Object(E.b)((function(e,t){var n=t.match.params,r=[n.entity,n.id].join("_"),a=e.entities[r]?e.entities[r]:{},i=a.loading,c=void 0===i||i,o=a.hasError,s=void 0!==o&&o,l=a.data;return{loading:c,items:void 0===l?[]:l,hasError:s}}),(function(e,t){var n=t.swapiService,r=t.match.params,a=r.entity,i=r.id;return{getItems:function(){return f(n,e,a,i)}}}))(N)),U=n(14),A=function(e){var t=e.films;return a.a.createElement("div",{className:"list-group"},t.map((function(e){var t="/films/"+e.url.id;return a.a.createElement(m.b,{to:t,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},e.title,a.a.createElement("span",{className:"badge badge-primary badge-pill"},"Episode: ",e.episode_id))})))},x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getFilms;e.films.data.length||t()}},{key:"render",value:function(){var e=this.props.films,t=e.loading,n=e.data;return e.hasError?a.a.createElement(O,{details:"Film load failure"}):t?a.a.createElement(b,null):a.a.createElement(A,{films:n})}}]),n}(a.a.Component),R=Object(U.b)(g(),Object(E.b)((function(e){return{films:e.films}}),(function(e,t){var n=t.swapiService;return{getFilms:function(){return function(e,t){t({type:"FETCH_ALL_FILMS_REQUEST"}),e.getEntity("films").then((function(e){return t(function(e){return{type:"FETCH_ALL_FILMS_SUCCESS",payload:e}}(e))})).catch((function(e){return t({type:"FETCH_ALL_FILMS_FAILURE"})}))}(n,e)}}})))(x),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(m.a,null,a.a.createElement("h1",{className:"text-center py-5"},a.a.createElement(m.b,{to:"/"},"Swapi GUI")),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col-md-9 col-lg-5"},a.a.createElement(p.a,{path:"/",exact:!0},a.a.createElement("h1",{className:"text-center"},"Films"),a.a.createElement(R,null)),a.a.createElement(p.a,{path:"/:entity/:id",component:k})))))}}]),n}(a.a.Component),D=n(10),P={loading:!0,hasError:!1,data:[]},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_FILMS_REQUEST":return Object(D.a)(Object(D.a)({},e),{},{loading:!0,hasError:!1});case"FETCH_ALL_FILMS_FAILURE":return Object(D.a)(Object(D.a)({},e),{},{loading:!1,hasError:!0});case"FETCH_ALL_FILMS_SUCCESS":return Object(D.a)(Object(D.a)({},e),{},{data:t.payload,loading:!1,hasError:!1});default:return e}},B=function(e,t,n){var r=t.payload,a=[r.entity,r.id].join("_");return e[a]=Object(D.a)(Object(D.a)(Object(D.a)({},{loading:!0,hasError:!1,data:[]}),e[a]),n),e},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ENTITY_REQUEST":return B(e,t,{loading:!0,hasError:!1});case"FETCH_ENTITY_SUCCESS":var n=t.payload.data;return B(e,t,{loading:!1,hasError:!1,data:n});case"FETCH_ENTITY_FAILURE":return B(e,t,{loading:!1,hasError:!0});default:return e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{films:M(e.films,t),entities:Y(e.entities,t)}},V=Object(U.c)(Q,window.__REDUX_DEVTOOLS_EXTENSION__()),J=n(17),X=n.n(J),z=n(24),G=function(){function e(){var t=this;Object(o.a)(this,e),this.BASE_URL="https://swapi.dev/api/",this.getData=function(){var e=Object(z.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getEntity=function(){var e=Object(z.a)(X.a.mark((function e(n){var r,a,i,c,o,s,l,u,m,p,d=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},a=r.id,i=void 0===a?null:a,c=r.page,s=n+"/",l=i?i+"/":"",u=(o=void 0===c?null:c)?"?page="+o:"",m=t.BASE_URL+s+l+u,e.next=8,t.getData(m);case 8:return p=e.sent,e.abrupt("return",t._resultParser(p));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resultParser=function(e){return e.results?e.results.map(t._listItemParser):t._listItemParser(e)},this._listItemParser=function(e){var n=Object.entries(e).map(t._singleItemParser);return Object.fromEntries(n)},this._singleItemParser=function(e){var n,r=Object(d.a)(e,2),a=r[0],i=r[1];return null!==i&&(n="object"===typeof i?i.map(t._processValue):t._processValue(i)),[a,n]},this._isLink=function(e){return e.match(/^http(s)?:\/\//)},this._processValue=function(e){return t._isLink(e.toString())?t._getTypeAndIdFromURL(e):e}}return Object(s.a)(e,[{key:"_getTypeAndIdFromURL",value:function(e){var t=e.match(/\/([a-zA-Z]+)\/((\d+)\/)?$/),n=Object(d.a)(t,4),r=n[1],a=n[3];return{entity:r,id:void 0===a?null:a,type:"entity"}}}]),e}(),Z=(n(40),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.errorBanner,r=t.children;return e?n:r}}]),n}(a.a.Component));Z.defaultProps={errorBanner:O};var $=Z;c.a.render(a.a.createElement(E.a,{store:V},a.a.createElement($,null,a.a.createElement(v,{value:new G},a.a.createElement(H,null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.0406265e.chunk.js.map